_target_: llm4rec_pytorch_simple.data.rec_dataset_v2.RecoDataModule_v2
max_hash_ranges:
  genres: 63
  title: 16383
  year: 511
data_path: ${paths.data_dir}
max_jagged_dimension: 16
max_sequence_length: 200     # 最大序列长度 (199 历史 + 1 输出)
num_items: 3884              # 物品总数 (3883 部电影 + 1 for padding)
batch_size: 16
sample_ratio: 1.0
num_workers: 4
prefetch_factor: 4

split_mode: "user_id" # 数据集按时间划分方式： global 全局划分，user 基于用户的划分，user_id 基于用户ID的划分

train_dataset:
  _target_: llm4rec_pytorch_simple.data.rec_dataset_v2.RecoDataset_v2
  ratings_file: "${paths.root_dir}/ml-1m/processed/sasrec_format_${data.split_mode}_train_data.csv"
  ignore_last_n: 0  # 全用上，因为这个是用 id 分的训练集

val_dataset:
  _target_: llm4rec_pytorch_simple.data.rec_dataset_v2.RecoDataset_v2
  ratings_file: "${paths.root_dir}/ml-1m/processed/sasrec_format_${data.split_mode}_test_data.csv"
  ignore_last_n: 0  # 全用上，因为这个是用 id 分的验证集

test_dataset:
  _target_: llm4rec_pytorch_simple.data.rec_dataset_v2.RecoDataset_v2
  ratings_file: "${paths.root_dir}/ml-1m/processed/sasrec_format_${data.split_mode}_test_data.csv"
  ignore_last_n: 0
